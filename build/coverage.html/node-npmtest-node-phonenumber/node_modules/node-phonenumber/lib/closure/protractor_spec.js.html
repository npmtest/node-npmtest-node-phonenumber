<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-node-phonenumber/node_modules/node-phonenumber/lib/closure/protractor_spec.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-node-phonenumber">npmtest-node-phonenumber (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-node-phonenumber/node_modules/node-phonenumber/lib/closure/protractor_spec.js</span></h1>
    <h2>
        
        Statements: <span class="metric">1.61% <small>(1 / 62)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 18)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 17)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">1.67% <small>(1 / 60)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-node-phonenumber/node_modules/node-phonenumber/lib/closure/</a> &#187; protractor_spec.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// TODO(joeltine): Remove promise module when stable node version supports it
// natively.
var Promise = require('promise');
<span class="cstat-no" title="statement not covered" >var allTests = require('./alltests');</span>
&nbsp;
// Timeout for individual test package to complete.
<span class="cstat-no" title="statement not covered" >var TEST_TIMEOUT = 45 * 1000;</span>
<span class="cstat-no" title="statement not covered" >var TEST_SERVER = 'http://localhost:8080';</span>
<span class="cstat-no" title="statement not covered" >var IGNORED_TESTS = [</span>
  // Test hangs in IE8.
  'closure/goog/ui/plaintextspellchecker_test.html',
  // TODO(joeltine): Re-enable once fixed for external testing.
  'closure/goog/testing/multitestrunner_test.html',
  // These Promise-based tests all timeout for unknown reasons.
  // Disable for now.
  'closure/goog/testing/fs/integration_test.html',
  'closure/goog/debug/fpsdisplay_test.html',
  'closure/goog/net/jsloader_test.html',
  'closure/goog/net/filedownloader_test.html',
  'closure/goog/promise/promise_test.html',
  'closure/goog/editor/plugins/abstractdialogplugin_test.html',
  'closure/goog/net/crossdomainrpc_test.html'
];
&nbsp;
<span class="cstat-no" title="statement not covered" >describe('Run all Closure unit tests', <span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >  var removeIgnoredTests = <span class="fstat-no" title="function not covered" >function(tests) {</span></span>
<span class="cstat-no" title="statement not covered" >    for (var i = 0; i &lt; IGNORED_TESTS.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      var index = tests.indexOf(IGNORED_TESTS[i]);</span>
<span class="cstat-no" title="statement not covered" >      if (index != -1) {</span>
<span class="cstat-no" title="statement not covered" >        tests.splice(index, 1);</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    return tests;</span>
  };
&nbsp;
<span class="cstat-no" title="statement not covered" >  beforeAll(<span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >allTests = removeIgnoredTests(allTests); </span>});</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  beforeEach(<span class="fstat-no" title="function not covered" >function() {</span></span>
    // Ignores synchronization with angular loading. Since we don't use angular,
    // enable it.
<span class="cstat-no" title="statement not covered" >    browser.ignoreSynchronization = true;</span>
  });
&nbsp;
  // Polls currently loaded test page for test completion. Returns Promise that
  // will resolve when test is finished.
<span class="cstat-no" title="statement not covered" >  var waitForTestSuiteCompletion = <span class="fstat-no" title="function not covered" >function(testPath) {</span></span>
<span class="cstat-no" title="statement not covered" >    var testStartTime = +new Date();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var waitForTest = <span class="fstat-no" title="function not covered" >function(resolve, reject) {</span></span>
      // executeScript runs the passed method in the "window" context of
      // the current test. JSUnit exposes hooks into the test's status through
      // the "G_testRunner" global object.
<span class="cstat-no" title="statement not covered" >      browser.executeScript(<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >               if (window['G_testRunner'] &amp;&amp;</span>
                   window['G_testRunner']['isFinished']()) {
<span class="cstat-no" title="statement not covered" >                 var status = {};</span>
<span class="cstat-no" title="statement not covered" >                 status['isFinished'] = true;</span>
<span class="cstat-no" title="statement not covered" >                 status['isSuccess'] = window['G_testRunner']['isSuccess']();</span>
<span class="cstat-no" title="statement not covered" >                 status['report'] = window['G_testRunner']['getReport']();</span>
<span class="cstat-no" title="statement not covered" >                 return status;</span>
               } else {
<span class="cstat-no" title="statement not covered" >                 return {'isFinished': false};</span>
               }
             })
          .then(
<span class="fstat-no" title="function not covered" >              function(status) {</span>
<span class="cstat-no" title="statement not covered" >                if (status &amp;&amp; status.isFinished) {</span>
<span class="cstat-no" title="statement not covered" >                  resolve(status);</span>
                } else {
<span class="cstat-no" title="statement not covered" >                  var currTime = +new Date();</span>
<span class="cstat-no" title="statement not covered" >                  if (currTime - testStartTime &gt; TEST_TIMEOUT) {</span>
<span class="cstat-no" title="statement not covered" >                    status.isSuccess = false;</span>
<span class="cstat-no" title="statement not covered" >                    status.report = testPath + ' timed out after ' +</span>
                        (TEST_TIMEOUT / 1000) + 's!';
                    // resolve so tests continue running.
<span class="cstat-no" title="statement not covered" >                    resolve(status);</span>
                  } else {
                    // Check every 300ms for completion.
<span class="cstat-no" title="statement not covered" >                    setTimeout(</span>
                        waitForTest.bind(undefined, resolve, reject), 300);
                  }
                }
              },
<span class="fstat-no" title="function not covered" >              function(err) {</span> <span class="cstat-no" title="statement not covered" >reject(err); </span>});
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    return new Promise(<span class="fstat-no" title="function not covered" >function(resolve, reject) {</span></span>
<span class="cstat-no" title="statement not covered" >      waitForTest(resolve, reject);</span>
    });
  };
&nbsp;
<span class="cstat-no" title="statement not covered" >  it('should run all tests with 0 failures', <span class="fstat-no" title="function not covered" >function(done) {</span></span>
<span class="cstat-no" title="statement not covered" >    var failureReports = [];</span>
&nbsp;
    // Navigates to testPath to invoke tests. Upon completion inspects returned
    // test status and keeps track of the total number failed tests.
<span class="cstat-no" title="statement not covered" >    var runNextTest = <span class="fstat-no" title="function not covered" >function(testPath) {</span></span>
<span class="cstat-no" title="statement not covered" >      return browser.navigate()</span>
          .to(TEST_SERVER + '/' + testPath)
          .then(<span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return waitForTestSuiteCompletion(testPath); </span>})
          .then(<span class="fstat-no" title="function not covered" >function(status) {</span>
<span class="cstat-no" title="statement not covered" >            if (!status.isSuccess) {</span>
<span class="cstat-no" title="statement not covered" >              failureReports.push(status.report);</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            return status;</span>
          });
    };
&nbsp;
    // Chains the next test to the completion of the previous through its
    // promise.
<span class="cstat-no" title="statement not covered" >    var chainNextTest = <span class="fstat-no" title="function not covered" >function(promise, test) {</span></span>
<span class="cstat-no" title="statement not covered" >      return promise.then(<span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >runNextTest(test); </span>});</span>
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    var testPromise = null;</span>
<span class="cstat-no" title="statement not covered" >    for (var i = 0; i &lt; allTests.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >      if (testPromise != null) {</span>
<span class="cstat-no" title="statement not covered" >        testPromise = chainNextTest(testPromise, allTests[i]);</span>
      } else {
<span class="cstat-no" title="statement not covered" >        testPromise = runNextTest(allTests[i]);</span>
      }
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    testPromise.then(<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >      var totalFailures = failureReports.length;</span>
<span class="cstat-no" title="statement not covered" >      if (totalFailures &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >        console.error('There was ' + totalFailures + ' test failure(s)!');</span>
<span class="cstat-no" title="statement not covered" >        for (var i = 0; i &lt; failureReports.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >          console.error(failureReports[i]);</span>
        }
      }
<span class="cstat-no" title="statement not covered" >      expect(failureReports.length).toBe(0);</span>
<span class="cstat-no" title="statement not covered" >      done();</span>
    });
  });
});
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 16:53:53 GMT+0000 (UTC)</div>
</div>
</body>
</html>
